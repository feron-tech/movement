FROM monroe/base

MAINTAINER marios.poulakis@feron-tech.com

RUN apt-get update -y \
&& apt-get install --no-install-recommends -y \
python-pip \
linphone \
netcat-openbsd \
python-pcapy \
&& apt-get clean autoclean && apt-get autoremove -y && rm -rf var/lib/apt/lists/* /tmp/* /var/tmp/* 

RUN pip install \
--upgrade setuptools \
dpkt \
numpy \
pyping \
pymongo

EXPOSE 1883

COPY files/ /opt/monroe/

ENTRYPOINT dumb-init -- /bin/bash /opt/monroe/run_main.sh

